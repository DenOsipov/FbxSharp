fixture FbxObjectTest
test FbxObject_Create_HasZeroProperties
    given
    FbxObject obj = new("")

    then
    AssertEqual(0, CountProperties(obj))
    AssertEqual(0, obj.GetSrcPropertyCount())
    AssertEqual(0, obj.GetDstPropertyCount())

test FbxObject_Create_HasRootProperty
    given
    FbxObject obj = new("")

    then
#cs AssertNotNull(&obj.RootProperty)
    AssertTrue((&obj.RootProperty).IsValid())
    AssertEqual("", obj.RootProperty&.GetName())

test FbxObject_Create_HasClassRootProperty
    given
    FbxObject obj = new("")

    then
#cs AssertNotNull(obj.GetClassRootProperty())
    AssertTrue(obj.GetClassRootProperty()&.IsValid())

// what do class root properties do in the case of inheritance?
// does FbxSurfacePhong have its own class root property and FbxSurfaceLambert another?

test FbxObject_GetName_GetsName
    given
    FbxObject obj = new("asdf")

    then
    AssertEqual("asdf", obj.GetName())

test FbxObject_SetName_SetsName
    given
    FbxObject obj = new("asdf")

    when
    obj.SetName("qwer")

    then
    AssertEqual("qwer", obj.GetName())

test FbxObject_Create_EmptyNamespace
    given
    FbxObject obj = new("asdf")

    then
    AssertEqual("", obj.GetNameSpaceOnly())

test FbxObject_SetNameSpace_SetsNamespace
    given
    FbxObject obj = new("asdf")

    when
    obj.SetNameSpace("qwer")

    then
    AssertEqual("qwer", obj.GetNameSpaceOnly())

test FbxObject_GetNameSpaceArray_SplitsNamespace
    given
    FbxObject obj = new("asdf")
    obj.SetNameSpace("name:space")
    FbxArray<FbxString*> arr

    when
    arr = obj.GetNameSpaceArray(':')

    then
    AssertEqual(2, arr&.GetCount())
    AssertEqual("space", *arr&.GetAt(0))
    AssertEqual("name", *arr&.GetAt(1))

    when
    arr = obj.GetNameSpaceArray('s')

    then
    AssertEqual(2, arr&.GetCount())
    AssertEqual("pace", *arr&.GetAt(0))
    AssertEqual("name:", *arr&.GetAt(1))

    when
    arr = obj.GetNameSpaceArray('a')

    then
    AssertEqual(3, arr&.GetCount())
    AssertEqual("ce", *arr&.GetAt(0))
    AssertEqual("me:sp", *arr&.GetAt(1))
    AssertEqual("n", *arr&.GetAt(2))

test FbxObject_Create_SetsInitialName
    given
    FbxObject obj = new("asdf")

    require
    AssertEqual("asdf", obj.GetName())

    then
    AssertEqual("asdf", obj.GetInitialName())

test FbxObject_SetName_DoesntChangeInitialName
    given
    FbxObject obj = new("asdf")

    require
    AssertEqual("asdf", obj.GetInitialName())
    AssertEqual("asdf", obj.GetName())

    when
    obj.SetName("qwer")

    then
    AssertEqual("asdf", obj.GetInitialName())
    AssertEqual("qwer", obj.GetName())

test FbxObject_SetInitialName_SetsInitialNameAndName
    given
    FbxObject obj = new("asdf")

    require
    AssertEqual("asdf", obj.GetInitialName())
    AssertEqual("asdf", obj.GetName())

    when
    obj.SetInitialName("qwer")

    then
    AssertEqual("qwer", obj.GetInitialName())
    AssertEqual("qwer", obj.GetName())

test FbxObject_Create_HasNamespacePrefix
    given
    FbxObject obj = new("asdf")

    then
    AssertEqual("", obj.GetNameSpacePrefix())

test FbxObject_GetNameOnly_GetsNameWithoutNamespacePrefix
    given
    FbxObject obj = new("asdf")

    require
    AssertEqual("asdf", obj.GetName())

    then
    AssertEqual("asdf", obj.GetNameOnly())

test FbxObject_SetNameSpaceAndGetNameOnly_FirstCharacterIsMissing
    given
    FbxObject obj = new("asdf")
    obj.SetNameSpace("qwer")

    require
    AssertEqual("asdf", obj.GetName())
    AssertEqual("qwer", obj.GetNameSpaceOnly())

    then
    AssertEqual("sdf", obj.GetNameOnly())

test FbxObject_SetNameSpaceThenSetName_FirstCharacterIsStillMissing
    given
    FbxObject obj = new("asdf")
    obj.SetNameSpace("qwer")

    require
    AssertEqual("asdf", obj.GetName())
    AssertEqual("qwer", obj.GetNameSpaceOnly())

    when
    obj.SetName("zxcv")

    then
    AssertEqual("asdf", obj.GetInitialName())
    AssertEqual("zxcv", obj.GetName())
    AssertEqual("xcv", obj.GetNameOnly())

test FbxObject_SetNameSpaceThenSetInitialName_FirstCharacterIsStillMissing
    given
    FbxObject obj = new("asdf")
    obj.SetNameSpace("qwer")

    require
    AssertEqual("asdf", obj.GetName())
    AssertEqual("qwer", obj.GetNameSpaceOnly())

    when
    obj.SetInitialName("zxcv")

    then
    AssertEqual("zxcv", obj.GetInitialName())
    AssertEqual("zxcv", obj.GetName())
    AssertEqual("xcv", obj.GetNameOnly())

test FbxObject_GetNameWithoutNameSpacePrefix_GetsNameWithoutNamespacePrefix
    given
    FbxObject obj = new("asdf")

    require
    AssertEqual("asdf", obj.GetName())

    then
    AssertEqual("asdf", obj.GetNameWithoutNameSpacePrefix())

test FbxObject_SetNameSpaceAndGetNameWithoutNameSpacePrefix_FirstCharacterIsNotMissing
    given
    FbxObject obj = new("asdf")
    obj.SetNameSpace("qwer")

    require
    AssertEqual("asdf", obj.GetName())
    AssertEqual("qwer", obj.GetNameSpaceOnly())

    then
    AssertEqual("asdf", obj.GetNameWithoutNameSpacePrefix())

test FbxObject_GetNameWithoutNameSpacePrefix_GetsNameWithNamespacePrefix
    given
    FbxObject obj = new("asdf")

    require
    AssertEqual("asdf", obj.GetName())

    then
    AssertEqual("asdf", obj.GetNameWithNameSpacePrefix())

test FbxObject_SetNameSpaceAndGetNameWithoutNameSpacePrefix_IncludesNamespace
    given
    FbxObject obj = new("asdf")
    obj.SetNameSpace("qwer")

    require
    AssertEqual("asdf", obj.GetName())
    AssertEqual("qwer", obj.GetNameSpaceOnly())

    then
    AssertEqual("asdf", obj.GetNameWithNameSpacePrefix())

/////////////////////////////

test Mesh_GetNameOnly_GetsNameWithoutNamespacePrefix
    given
    Mesh obj = new("asdf")

    require
    AssertEqual("asdf", obj.GetName())

    then
    AssertEqual("asdf", obj.GetNameOnly())

test Mesh_SetNameSpaceAndGetNameOnly_FirstCharacterIsMissing
    given
    Mesh obj = new("asdf")
    obj.SetNameSpace("qwer")

    require
    AssertEqual("asdf", obj.GetName())
    AssertEqual("qwer", obj.GetNameSpaceOnly())

    then
    AssertEqual("sdf", obj.GetNameOnly())

test Mesh_SetNameSpaceThenSetName_FirstCharacterIsStillMissing
    given
    Mesh obj = new("asdf")
    obj.SetNameSpace("qwer")

    require
    AssertEqual("asdf", obj.GetName())
    AssertEqual("qwer", obj.GetNameSpaceOnly())

    when
    obj.SetName("zxcv")

    then
    AssertEqual("asdf", obj.GetInitialName())
    AssertEqual("zxcv", obj.GetName())
    AssertEqual("xcv", obj.GetNameOnly())

test Mesh_SetNameSpaceThenSetInitialName_FirstCharacterIsStillMissing
    given
    Mesh obj = new("asdf")
    obj.SetNameSpace("qwer")

    require
    AssertEqual("asdf", obj.GetName())
    AssertEqual("qwer", obj.GetNameSpaceOnly())

    when
    obj.SetInitialName("zxcv")

    then
    AssertEqual("zxcv", obj.GetInitialName())
    AssertEqual("zxcv", obj.GetName())
    AssertEqual("xcv", obj.GetNameOnly())

test Mesh_GetNameWithoutNameSpacePrefix_GetsNameWithoutNamespacePrefix
    given
    Mesh obj = new("asdf")

    require
    AssertEqual("asdf", obj.GetName())

    then
    AssertEqual("asdf", obj.GetNameWithoutNameSpacePrefix())

test Mesh_SetNameSpaceAndGetNameWithoutNameSpacePrefix_FirstCharacterIsNotMissing
    given
    Mesh obj = new("asdf")
    obj.SetNameSpace("qwer")

    require
    AssertEqual("asdf", obj.GetName())
    AssertEqual("qwer", obj.GetNameSpaceOnly())

    then
    AssertEqual("asdf", obj.GetNameWithoutNameSpacePrefix())

test Mesh_GetNameWithoutNameSpacePrefix_GetsNameWithNamespacePrefix
    given
    Mesh obj = new("asdf")

    require
    AssertEqual("asdf", obj.GetName())
    AssertEqual("Geometry:\:", obj.GetNameSpacePrefix())

    then
    AssertEqual("Geometry:\:asdf", obj.GetNameWithNameSpacePrefix())

test Mesh_SetNameSpaceAndGetNameWithoutNameSpacePrefix_IncludesNamespace
    given
    Mesh obj = new("asdf")
    obj.SetNameSpace("qwer")

    require
    AssertEqual("asdf", obj.GetName())
    AssertEqual("qwer", obj.GetNameSpaceOnly())
    AssertEqual("Geometry:\:", obj.GetNameSpacePrefix())

    then
    AssertEqual("Geometry:\:asdf", obj.GetNameWithNameSpacePrefix())
